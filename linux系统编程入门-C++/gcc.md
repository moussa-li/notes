# gcc编译

## 编译过程





​                                                      																													 启动代码 ˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉ˥

 																																										  库代码 ˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉˉ˦

​																																											其他目标代码 ˉˉˉˉˉˉˉˉˉˉ˦

c/c++文件（源代码） ---预处理---> .i文件（预处理后源代码）---编译器---> .s文件（汇编代码）---汇编器---> .o文件（目标代码）---连接器---》.exe/.out文件（可执行程序）



## 编译选项

|               gcc编译选项                |                             说明                             |
| :--------------------------------------: | :----------------------------------------------------------: |
|                    -E                    |                预处理指定的源文件，不进行编译                |
|                    -S                    |                编译指定的源文件，但不进行汇编                |
|                    -c                    |             编译、汇编指定的源文件，但不进行链接             |
| -o [file1] [file2] / [file1] -o  [file2] |             将文件 file2 编译成可执行文件 file1              |
|               -I directory               |               指定 include 包含文件的搜索目录                |
|                    -g                    |     在编译的时候，生成调试信息，该程序额可以被调试器调试     |
|                    -D                    |                 在程序编译的时候，指定一个宏                 |
|                    -w                    |                        不生成任何警告                        |
|                  -wall                   |                       生成所有警告信息                       |
|                   -On                    | n的取值范围：0~3。编译器的优化选项的4个级别， -O0表示没有优化，-O1为缺省值， -O3优化级别最高 |
|                    -l                    |                  在编译的时候，指定使用的库                  |
|                    -L                    |                 在编译的时候，搜索的库的路径                 |
|                -fPIC/fpic                |                     生成与位置无关的代码                     |
|                 -shared                  |           生成共享目标文件，通常在建立共享库时使用           |
|                   -std                   |         指定C方言，如：-std=c99,gcc默认的方言时GUN C         |



## gcc和g++区别

1.对于.c后缀文件，gcc当作C程序，g++当作C++程序

2.对于.cpp后缀文件，两者都当作C++程序

3.编译阶段g++会调用gcc，对于c++代码，两者等价，但因为gcc命令不能自动和C++程序使用的库链接，所以通常用g++来文成链接，为了统一故用g++直接编译链接c++代码。

4.gcc对于.c文件不会定义__cplusplus宏，其他情况都会

5.链接时 g++与gcc -lstdc++等效